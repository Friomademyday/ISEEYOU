<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SYNTH-BIO INTERFACE</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #050505;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            overflow: hidden;
            perspective: 1000px;
        }

        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://grainy-gradients.vercel.app/noise.svg');
            opacity: 0.05;
            pointer-events: none;
            z-index: 10;
        }

        .face-container {
            position: relative;
            width: 450px;
            height: 550px;
            background: radial-gradient(circle at 50% 40%, #2a2a2e 0%, #121214 70%, #080808 100%);
            border-radius: 150px 150px 220px 220px;
            box-shadow: 
                0 50px 100px rgba(0,0,0,0.9),
                inset 0 2px 5px rgba(255,255,255,0.1),
                inset 0 -10px 30px rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            border: 1px solid #1a1a1c;
        }

        .brow-ridge {
            position: absolute;
            top: 100px;
            width: 100%;
            height: 60px;
            background: linear-gradient(to bottom, transparent, rgba(0,0,0,0.4));
            border-radius: 50%;
            filter: blur(5px);
        }

        .eye-socket {
            position: absolute;
            top: 160px;
            width: 120px;
            height: 80px;
            background: #000;
            border-radius: 50% 50% 45% 45%;
            box-shadow: 
                inset 0 10px 20px rgba(0,0,0,1),
                0 1px 1px rgba(255,255,255,0.05);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .eye-left { left: 60px; }
        .eye-right { right: 60px; }

        .iris {
            width: 65px;
            height: 65px;
            background: 
                radial-gradient(circle at center, #00d4ff 0%, #0055ff 40%, #001133 80%);
            border-radius: 50%;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 25px rgba(0, 85, 255, 0.4);
            transition: transform 0.08s ease-out;
        }

        .iris::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: repeating-conic-gradient(from 0deg, transparent 0deg 10deg, rgba(0,0,0,0.1) 11deg 20deg);
            border-radius: 50%;
        }

        .pupil {
            width: 24px;
            height: 24px;
            background: #000;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(0,0,0,0.8);
            position: relative;
            overflow: hidden;
        }

        .lens-glare {
            position: absolute;
            top: 15%;
            left: 15%;
            width: 50%;
            height: 50%;
            background: linear-gradient(135deg, rgba(255,255,255,0.4) 0%, transparent 60%);
            border-radius: 50%;
            pointer-events: none;
        }

        .cheek-detail {
            position: absolute;
            top: 300px;
            width: 80px;
            height: 2px;
            background: rgba(255,255,255,0.02);
            box-shadow: 0 1px 0 rgba(0,0,0,0.5);
        }

        .cheek-l { left: 40px; transform: rotate(15deg); }
        .cheek-r { right: 40px; transform: rotate(-15deg); }

        #video-feedback {
            position: fixed;
            bottom: 30px;
            left: 30px;
            width: 120px;
            border-radius: 10px;
            opacity: 0.3;
            filter: grayscale(1) contrast(1.2);
            transform: scaleX(-1);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .interface-text {
            position: absolute;
            bottom: 40px;
            color: #444;
            font-family: monospace;
            font-size: 10px;
            letter-spacing: 3px;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<div class="noise-overlay"></div>

<div class="face-container">
    <div class="brow-ridge"></div>
    
    <div class="eye-socket eye-left">
        <div id="iris-l" class="iris">
            <div class="pupil">
                <div class="lens-glare"></div>
            </div>
        </div>
    </div>

    <div class="eye-socket eye-right">
        <div id="iris-r" class="iris">
            <div class="pupil">
                <div class="lens-glare"></div>
            </div>
        </div>
    </div>

    <div class="cheek-detail cheek-l"></div>
    <div class="cheek-detail cheek-r"></div>

    <div class="interface-text" id="log">AWAITING BIOMETRIC SCAN</div>
</div>

<video id="video-feedback" autoplay playsinline></video>

<script>
    const video = document.getElementById('video-feedback');
    const log = document.getElementById('log');
    const irisL = document.getElementById('iris-l');
    const irisR = document.getElementById('iris-r');

    function updateEyes(results) {
        if (results.multiFaceLandmarks && results.multiFaceLandmarks.length > 0) {
            const face = results.multiFaceLandmarks[0];
            const nose = face[1];

            const sensitivityX = 70;
            const sensitivityY = 45;

            const targetX = -(nose.x - 0.5) * sensitivityX;
            const targetY = (nose.y - 0.4) * sensitivityY;

            const jitterX = (Math.random() - 0.5) * 1.5;
            const jitterY = (Math.random() - 0.5) * 1.5;

            irisL.style.transform = `translate(${targetX + jitterX}px, ${targetY + jitterY}px)`;
            irisR.style.transform = `translate(${targetX + jitterX}px, ${targetY + jitterY}px)`;
            
            log.innerText = "SUBJECT VERIFIED // TRACKING ACTIVE";
            log.style.color = "#00d4ff";
        } else {
            log.innerText = "SIGNAL LOST // REACQUIRING...";
            log.style.color = "#662222";
        }
    }

    const faceMesh = new FaceMesh({
        locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/${file}`
    });

    faceMesh.setOptions({
        maxNumFaces: 1,
        refineLandmarks: true,
        minDetectionConfidence: 0.6,
        minTrackingConfidence: 0.6
    });

    faceMesh.onResults(updateEyes);

    async function init() {
        const stream = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "user" }
        });
        video.srcObject = stream;
        video.onloadedmetadata = () => {
            predict();
        };
    }

    async function predict() {
        await faceMesh.send({image: video});
        requestAnimationFrame(predict);
    }

    init();
</script>

</body>
</html>
